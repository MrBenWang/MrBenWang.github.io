<!DOCTYPE html>
<html lang="zh-cn" itemscope itemtype="http://schema.org/WebPage">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>*根据时间戳，增量同步数据的解决办法 - 风雪夜归人</title>
  

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta name="MobileOptimized" content="width"/>
<meta name="HandheldFriendly" content="true"/>


<meta name="applicable-device" content="pc,mobile">

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="mobile-web-app-capable" content="yes">

<meta name="author" content="Long" />
  <meta name="description" content="最近在工作中遇到一个比较棘手的问题，客户端从服务端同步数据的问题。
思考这个解决的方法还是花费了不少的精力。 " />

  <meta name="keywords" content="码农, 逻辑, 自由" />



<meta name="google-site-verification" content="hqw-Lg4woniVGx2b2LZ25xQDQsh_da1VWm_nhza2aZg" />


<meta name="generator" content="Hugo 0.49" />


<link rel="canonical" href="https://mrbenwang.github.io/post/20181215-incremen-sync-by-datetime/" />



<link rel="icon" href="/favicon.ico" />











<link rel="stylesheet" href="/sass/jane.min.c8c1ff75dee09b44060a6c38f41b9036bac2512ccdb22d7f296cec12dc786375.css" integrity="sha256-yMH/dd7gm0QGCmw49BuQNrrCUSzNsi1/KWzsEtx4Y3U=" media="screen">




<link rel="stylesheet" href="/css/custom.css">


<meta property="og:title" content="*根据时间戳，增量同步数据的解决办法" />
<meta property="og:description" content="最近在工作中遇到一个比较棘手的问题，客户端从服务端同步数据的问题。
思考这个解决的方法还是花费了不少的精力。
" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://mrbenwang.github.io/post/20181215-incremen-sync-by-datetime/" /><meta property="article:published_time" content="2018-12-15T15:20:00&#43;08:00"/>
<meta property="article:modified_time" content="2018-12-15T15:20:00&#43;08:00"/>

<meta itemprop="name" content="*根据时间戳，增量同步数据的解决办法">
<meta itemprop="description" content="最近在工作中遇到一个比较棘手的问题，客户端从服务端同步数据的问题。
思考这个解决的方法还是花费了不少的精力。
">


<meta itemprop="datePublished" content="2018-12-15T15:20:00&#43;08:00" />
<meta itemprop="dateModified" content="2018-12-15T15:20:00&#43;08:00" />
<meta itemprop="wordCount" content="3032">



<meta itemprop="keywords" content="增量同步," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="*根据时间戳，增量同步数据的解决办法"/>
<meta name="twitter:description" content="最近在工作中遇到一个比较棘手的问题，客户端从服务端同步数据的问题。
思考这个解决的方法还是花费了不少的精力。
"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-130619472-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>



</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">风雪夜归人</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://mrbenwang.github.io/">主页</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://mrbenwang.github.io/post/">归档</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://mrbenwang.github.io/tags/">标签</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://mrbenwang.github.io/categories/">分类</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://mrbenwang.github.io/about/">关于</a>
          
        
      </li>
    
  </ul>
</nav>


  
    






  <link rel="stylesheet" href="/lib/photoswipe/photoswipe.min.css" />
  <link rel="stylesheet" href="/lib/photoswipe/default-skin/default-skin.min.css" />




<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

  

  

  <header id="header" class="header container">
    <div class="logo-wrapper">
  <a href="/" class="logo">
    
      风雪夜归人
    
  </a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://mrbenwang.github.io/">主页</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://mrbenwang.github.io/post/">归档</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://mrbenwang.github.io/tags/">标签</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://mrbenwang.github.io/categories/">分类</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://mrbenwang.github.io/about/">关于</a>
          

        

      </li>
    
    
  </ul>
</nav>

  </header>

  <div id="mobile-panel">
    <main id="main" class="main bg-llight">
      <div class="content-wrapper">
        <div id="content" class="content container">
          <article class="post bg-white">
    
    <header class="post-header">
      <h1 class="post-title">*根据时间戳，增量同步数据的解决办法</h1>
      
      <div class="post-meta">
        <time datetime="2018-12-15" class="post-time">
          2018-12-15 15:20
        </time>
        <div class="post-category">
            <a href="https://mrbenwang.github.io/categories/%E5%B7%A5%E4%BD%9C%E9%9A%8F%E7%AC%94/"> 工作随笔 </a>
            
          </div>
        <span class="more-meta"> 约 3032 字 </span>
          <span class="more-meta"> 预计阅读 7 分钟 </span>

        
        

        
        
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
<ul>
<li><a href="#前言">前言</a>
<ul>
<li><a href="#模拟场景">模拟场景</a></li>
<li><a href="#解决思路">解决思路</a>
<ul>
<li><a href="#生成新的唯一标识"><del>生成新的唯一标识</del></a></li>
<li><a href="#数据库表修改-不推荐">数据库表修改(不推荐)</a>
<ul>
<li><a href="#修改数据内容">修改数据内容</a></li>
<li><a href="#增加字段">增加字段</a></li>
</ul></li>
<li><a href="#我的解决方法">我的解决方法</a>
<ul>
<li><a href="#分页提取数据的可能情况">分页提取数据的可能情况</a></li>
<li><a href="#情景2部分情况-提取的起始点">情景2部分情况，提取的起始点</a></li>
<li><a href="#完整的分页过程">完整的分页过程</a></li>
</ul></li>
</ul></li>
<li><a href="#经验总结">经验总结</a></li>
</ul></li>
</ul>
</nav>
  </div>
</div>

    
    <div class="post-content">
      <p>最近在工作中遇到一个比较棘手的问题，客户端从服务端同步数据的问题。<br />
思考这个解决的方法还是花费了不少的精力。
</p>

<h1 id="前言">前言</h1>

<p>最近在工作中遇到一个比较棘手的问题，客户端从服务端同步数据的问题。<br />
背景简介：客户端有N个，客户端上的同步时间，<code>各不相同</code>。同步的时候，是一次获取10条数据，多批次获取。即分页获取。<br />
在代码中存在两种同步的方式：</p>

<ol>
<li>全量同步。同步过程是从服务端拉取全部的数据；依赖具有<code>唯一约束</code>的<code>ID</code>来实现同步。只适用于数据量小的表，浪费网络流量。</li>
<li>增量同步。从服务器拉取<code>大于</code>客户端<code>最新时间</code>的数据；依赖于<code>时间戳</code>，问题时间戳<code>不唯一</code>存在相同时间点下面多条数据，会出现数据遗漏，也会重复拉取数据，浪费网络流量。</li>
</ol>

<p>本文的所使用到的解决办法，就是结合了<strong>唯一ID</strong>和<strong>时间戳</strong>，两个入参来做增量同步。本文也只做逻辑层面的说明。</p>

<h2 id="模拟场景">模拟场景</h2>

<p>表结构：ID 具有唯一约束， Name 姓名， UpdateTime 更新时间；现在问题的关键是ID为3，4，这两条时间点相同的数据。<br />
假如一次只能同步一条数据，如何同步完ID 2后，再同步 ID 3。</p>

<table>
<thead>
<tr>
<th>ID</th>
<th>Name</th>
<th>UpdateTime</th>
</tr>
</thead>

<tbody>
<tr>
<td>1</td>
<td>张三</td>
<td>2018-11-10</td>
</tr>

<tr>
<td>2</td>
<td>李四</td>
<td><strong>2018-12-10</strong></td>
</tr>

<tr>
<td>3</td>
<td>王五</td>
<td><strong>2018-12-10</strong></td>
</tr>

<tr>
<td>4</td>
<td>赵六</td>
<td>2018-11-20</td>
</tr>

<tr>
<td>5</td>
<td>金七</td>
<td>2018-11-30</td>
</tr>
</tbody>
</table>

<h2 id="解决思路">解决思路</h2>

<h3 id="生成新的唯一标识"><del>生成新的唯一标识</del></h3>

<p>通过 UpdateTime 和 ID 这两种数据，通过某种运算，生成新的数。而这个<code>新的数</code>具备<strong>可排序</strong>和<strong>唯一</strong>；同时还要携带有<code>ID</code>和<code>UpdateTime</code>的信息。<br />
简单表述就是，具有一个函数f：  <strong>f(可排序A，可排序唯一B) = 可排序唯一C</strong> 。 C 的唯一解是 A和B。<a href="https://zh.wikipedia.org/wiki/RSA%E5%8A%A0%E5%AF%86%E6%BC%94%E7%AE%97%E6%B3%95">RSA加密算法</a></p>

<p>我想出了一个方法，也是生活中比较常用的方法：</p>

<ol>
<li>先把 UpdateTime 转变成数字。如： 字符串 2018-12-10 -&gt; 数字 20181210;<br /></li>
<li>然后 UpdateTime 乘以权重，这个<code>权重</code>必须大于<code>ID</code>的可能最大值。如： 20181210 * 100 = 2018121000，Max(ID)&lt;999<br /></li>
<li>然后再把第二部的结果，加上唯一键<code>ID</code>。如： 2018121000 + 3 = 2018121003。<br /></li>
</ol>

<p>这个时候，<strong>2018121003</strong> 这个数，既包含了<code>UpdateTime</code>和<code>ID</code>的信息，又具有<strong>可排序</strong>和<strong>唯一性</strong>。用它作为增量更新的判断点，是再好不过的了。<br />
但是它具有很大的缺点：数字太大了，时间转化成数字，目前还是用的是<strong>天</strong>级别，如果换成<strong>毫秒</strong>级别呢。还有ID可能的最大值也够大了，如果是<strong>int64</strong>那就更没得搞了。</p>

<p>这个方法理论上可行，实际中不可用基本不可行，除非找到一种非常好的函数f；<br />
<em>PS: 我的直觉告诉我：  极可能存在这种函数，既满足我的需要，又可以克服数字很大这个问题。只是我目前不知道。</em></p>

<h3 id="数据库表修改-不推荐">数据库表修改(不推荐)</h3>

<h4 id="修改数据内容">修改数据内容</h4>

<p>修改数据内容，使 <code>UpdateTime</code> 数据值唯一。缺点也比较明显：</p>

<ol>
<li>脚本操作数据的情况下，或者直接sql更新。可能会，造成时间不唯一；</li>
<li>只是适用在数据量小，系统操作频率小的情况下。因为毫秒级别的时间，在绝大多数软件系统中，可以认为是唯一；</li>
<li>尤其是老旧项目，历史遗留数据如何处理。</li>
</ol>

<h4 id="增加字段">增加字段</h4>

<p>还有一种办法，就是在数据库中，增加一个新的字段，专门用来同步数据的时候使用。<br />
比方说，增加字段 <code>SyncData</code> int 类型。如果 UpdateTime 发生了改变，就把它更新为 <code>SyncData = Max(SyncData) + 1</code>;<br />
也就是说， <code>SyncData</code> 这个字段的最大值<strong>一定是</strong>最新的数据，<code>SyncData</code>的降序就是 更新时间的降序。<code>SyncData</code>是<code>更新时间顺序</code>的<strong>充分不必要条件</strong>。</p>

<p>总的来说，这种办法是比较好的，但缺点也比较明显：</p>

<ol>
<li>需要修改表结构，并且额外维护这个字段；<br /></li>
<li>新增或者更新的时候，会先锁表，找出这个表的最大值，再更新，资源浪费明显。<br /></li>
<li>如果表的数据量比较大，或者更新比较频繁时候。时间消耗较大。<br /></li>
</ol>

<h3 id="我的解决方法">我的解决方法</h3>

<h4 id="分页提取数据的可能情况">分页提取数据的可能情况</h4>

<p>首先，先来分析一下，一次提取10条数据，提取的数据，存在的可能情况。再次说明<strong>前提</strong>，先时间倒序，再ID倒序。<code>Order By UpdateTime DESC, ID DESC</code><br />
可能情况如下图，可以简化为三种：</p>

<ol>
<li>情景1。当前获取的数据中包含了，<strong>所有</strong>相同时间点的数据；图1，图5<br /></li>
<li>情景2。当前获取的数据中包含了，<strong>部分</strong>相同时间点的数据；图2，图3，图4，图6，图7<br /></li>
<li>情景3。当前获取的数据中包含了，<strong>没有</strong>相同时间点的数据；图···<br /></li>
</ol>

<p>其中<code>情景1</code>和<code>情景3</code>，可以把查询条件变为：<code>WHERE UpdateTime &gt; sync_time LIMIT 10</code><br />
但是<code>情景2</code>的情况不能使用大于<code>&gt;</code>这个条件。假如使用了大于<code>&gt;</code>这个条件，<code>情景2</code>就会变成<code>情景1</code>或<code>情景3</code>或<code>图3</code>这种情况。不是包含<strong>部分</strong>了，需要额外特别处理。<br />
注：图3的<code>结束点 ]</code>不重要，下面情景5有解释。<br />
<img src="/images/0024-incremen-sync-by-datetime/sync-data-function.jpg" alt="同步数据的可能性" /></p>

<h4 id="情景2部分情况-提取的起始点">情景2部分情况，提取的起始点</h4>

<p>提取的起始点：也就是说图中<code>[</code><strong>左中括号</strong>的位置，需要准确定位这个位置。<br />
至于结束点：图中<code>]</code><strong>右中括号</strong>的位置是在哪里。这个就不重要了，因为下一次的分页提取的<code>起始点</code>，就是<strong>上一次的结束点</strong>。只需要关注起始点就足够了。</p>

<p>而根据起始点，又可以把<code>情景2</code>，再做一次简化：</p>

<ol>
<li>情景4。起始点<strong>在</strong>相同时间点集合内的；图2，图4，图6，图7</li>
<li>情景5。起始点<strong>不在</strong>相同时间点集合内的；图3，</li>
</ol>

<p>针对<code>情景4</code>。这个时候，时间戳<code>sync_time</code>一个入参就不够了，还额外需要<strong>唯一键</strong>ID来准确定位。可以把查询写作：<code>WHERE UpdateTime = sync_time AND ID &gt; sync_id LIMIT 10</code>。<br />
如果查询的行数 <strong>等于</strong> 10，则是图4；<strong>小于</strong> 10，则是图2，图6，图7的情况。</p>

<p>针对<code>情景5</code>。依旧可以使用：<code>WHERE UpdateTime &gt; sync_time LIMIT 10</code></p>

<h4 id="完整的分页过程">完整的分页过程</h4>

<p>完整的分页过程的步骤：<br />
一、先用起始点来过滤：<code>WHERE UpdateTime = sync_time AND ID &gt; sync_id LIMIT 10</code>，查询结果行数N。如果 <code>N=10</code>是<strong>图4</strong>的情况，则结束，并且直接返回结果。如果 <code>0&lt;= N &lt;10</code> ，则进行第二步，其中<code>N=0</code>是<strong>图1</strong>，<strong>图3</strong>，<strong>图5</strong>，<strong>图···</strong>的情况；</p>

<p>二、再用时间戳查询：<code>WHERE UpdateTime &gt; sync_time LIMIT 10-N</code>，查询结果行数 M ，<code>0&lt;= M &lt;=10-N</code>；这个阶段，是否同一个时间点都不重要了。只需要<code>按着顺序</code>取<strong>已排序</strong>的数据就可以了；</p>

<p>三、把一和二的结果集合并，一并返回。</p>

<p>四、重复步骤一二三，直到，分页获取的最后一条数据的<code>ID</code>，是服务端数据库中最新的ID；(防止存在，恰好这十条是所需要获取的最后十条)。</p>

<p>服务端中最新ID获取：<code>Select Id From myTable Order by UpdateTime desc,ID desc Limit 1</code>;</p>

<h2 id="经验总结">经验总结</h2>

<p>寻找<strong>关键信息</strong>，以及具有<strong>指标意义</strong>的数据，或者<strong>数据的组合</strong>。</p>

<ul>
<li>最开始，我只执着于 UpdateTime 这个数据，甚至提出去数据库中，修改历史数据，再把 UpdateTime 加上唯一约束(以前也没有听说过在 UpdateTime 这个字段上面加唯一约束)。并且这种办法，局限性有很强，不可以通用。<br /></li>
<li>主键ID唯一，但是它不具有时间属性。只适用于全部更新。<br /></li>
<li>把他们两个结合起来，才算是打开了新的思路。<br /></li>
</ul>

<p><strong>拆分</strong>问题，<strong>简化</strong>问题</p>

<ul>
<li>把 UpdateTime 和 ID 组合使用时。妄图在一个sql里面来实现。发现无论怎么改，都会存在逻辑上面的问题；</li>
<li>没有拆分化简的时候，如果用存储过程来写的话，会非常非常复杂；</li>
<li>直到，我在脑袋里面，模拟出来可能的情况后。也就是上面的图片<code>同步数据的可能性</code>，慢慢归类，简化后；才发现。问题没有那么难，仅仅是<strong>起始点</strong>这一个小小的问题。<br /></li>
</ul>

<p>使用<strong>逻辑分析</strong>和<strong>哲学归纳</strong></p>

<ul>
<li>在分析数据的意义和性质的时候，偶然间使用到了归纳的方法；也就是<code>唯一</code>和<code>可排序</code>；跳出了具体字段，使用场景的框架束缚，而去考虑这两种性质怎么结合的问题；</li>
<li>在逻辑分析的时候，先用排列组合，算出多少种可能性；在脑中勾画出图形，把性质相同的可能性合并化简；</li>
<li>在化简的过程中，不要仅仅着眼于查询的对象，也要去化简<code>查询的方法</code>；有点绕，打个比方，既要优化最终产品，也要去优化制作工艺；</li>
</ul>

<p>最后，我认为我最近的逻辑分析能力，好像有比较大的提升。</p>

<ul>
<li>直接得益于，常见的24种逻辑谬误的了解，<a href="https://mrbenwang.github.io/post/20181207-logical-fallacy-list-foreword/">【转】逻辑谬误列表(序言)</a>，在平常的生活中，说话做事，也就有了逻辑方面的意识；</li>
<li>间接可能得益于台大哲学系苑举正，苑老师讲话的视频。其实我很早以前，高中时候就喜欢哲学，《哲学的基本原理》这么枯燥的书，我居然认认真真仔仔细细的边读边想的看了三四遍。只是那时好多完全不懂，好多似懂非懂。十多年后虽然什么都不记得了，但是好像又懂了。。。感觉太玄了。。。</li>
</ul>
    </div>

    
    
<div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">Long</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">2018-12-15 15:20</span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">许可协议</span>
    <span class="item-content">原创文章，如需转载请注明文章作者和出处。谢谢！</span>
  </p>
</div>


    
    

    <footer class="post-footer">
      <div class="post-tags">
          <a href="https://mrbenwang.github.io/tags/%E5%A2%9E%E9%87%8F%E5%90%8C%E6%AD%A5/">增量同步</a>
          
        </div>

      
      <nav class="post-nav">
        
          <a class="prev" href="/post/20181225-review-my-wuxu-year/">
            
            <i class="iconfont">
              <svg  class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M691.908486 949.511495l75.369571-89.491197c10.963703-12.998035 10.285251-32.864502-1.499144-44.378743L479.499795 515.267417 757.434875 204.940602c11.338233-12.190647 11.035334-32.285311-0.638543-44.850487l-80.46666-86.564541c-11.680017-12.583596-30.356378-12.893658-41.662889-0.716314L257.233596 494.235404c-11.332093 12.183484-11.041474 32.266891 0.657986 44.844348l80.46666 86.564541c1.772366 1.910513 3.706415 3.533476 5.750981 4.877077l306.620399 321.703933C662.505829 963.726242 680.945807 962.528973 691.908486 949.511495z"></path>
</svg>

            </i>
            <span class="prev-text nav-default">我的戊戌年</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        
          <a class="next" href="/post/20181207-logical-fallacy-list-ex/">
            <span class="next-text nav-default">[转]逻辑谬误列表(例子)</span>
            <span class="prev-text nav-mobile">下一篇</span>
            
            <i class="iconfont">
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M332.091514 74.487481l-75.369571 89.491197c-10.963703 12.998035-10.285251 32.864502 1.499144 44.378743l286.278095 300.375162L266.565125 819.058374c-11.338233 12.190647-11.035334 32.285311 0.638543 44.850487l80.46666 86.564541c11.680017 12.583596 30.356378 12.893658 41.662889 0.716314l377.434212-421.426145c11.332093-12.183484 11.041474-32.266891-0.657986-44.844348l-80.46666-86.564541c-1.772366-1.910513-3.706415-3.533476-5.750981-4.877077L373.270379 71.774697C361.493148 60.273758 343.054193 61.470003 332.091514 74.487481z"></path>
</svg>

            </i>
          </a>
      </nav>
    </footer>
  </article>

  
  

  
  

  
  
    <div class="post bg-white">
      <script src="https://utteranc.es/client.js"
            repo= "MrBenWang/comments-for-my-blog"
            issue-term="pathname"
            crossorigin="anonymous"
            async>
      </script>
    </div>
  

  

  

  
  
    



        </div>
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  
  
    <a href="mailto:wzlblair@foxmail.com" rel="me noopener" class="iconfont"
      title="email" >
      <svg class="icon" viewBox="0 0 1451 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M664.781909 681.472759 0 97.881301C0 3.997201 71.046997 0 71.046997 0L474.477909 0 961.649408 0 1361.641813 0C1361.641813 0 1432.688811 3.997201 1432.688811 97.881301L771.345323 681.472759C771.345323 681.472759 764.482731 685.154773 753.594283 688.65053L753.594283 688.664858C741.602731 693.493018 729.424896 695.068979 718.077952 694.839748 706.731093 695.068979 694.553173 693.493018 682.561621 688.664858L682.561621 688.65053C671.644501 685.140446 664.781909 681.472759 664.781909 681.472759L664.781909 681.472759ZM718.063616 811.603883C693.779541 811.016482 658.879232 802.205449 619.10784 767.734955 542.989056 701.759633 0 212.052267 0 212.052267L0 942.809523C0 942.809523 0 1024 83.726336 1024L682.532949 1024 753.579947 1024 1348.948139 1024C1432.688811 1024 1432.688811 942.809523 1432.688811 942.809523L1432.688811 212.052267C1432.688811 212.052267 893.138176 701.759633 817.019477 767.734955 777.248 802.205449 742.347691 811.03081 718.063616 811.603883L718.063616 811.603883Z"></path>
</svg>

    </a>
  
    <a href="https://github.com/MrBenWang" rel="me noopener" class="iconfont"
      title="github"  target="_blank"
      >
      <svg class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M512 12.672c-282.88 0-512 229.248-512 512 0 226.261333 146.688 418.133333 350.08 485.76 25.6 4.821333 34.986667-11.008 34.986667-24.618667 0-12.16-0.426667-44.373333-0.64-87.04-142.421333 30.890667-172.458667-68.693333-172.458667-68.693333C188.672 770.986667 155.008 755.2 155.008 755.2c-46.378667-31.744 3.584-31.104 3.584-31.104 51.413333 3.584 78.421333 52.736 78.421333 52.736 45.653333 78.293333 119.850667 55.68 149.12 42.581333 4.608-33.109333 17.792-55.68 32.426667-68.48-113.706667-12.8-233.216-56.832-233.216-253.013333 0-55.893333 19.84-101.546667 52.693333-137.386667-5.76-12.928-23.04-64.981333 4.48-135.509333 0 0 42.88-13.738667 140.8 52.48 40.96-11.392 84.48-17.024 128-17.28 43.52 0.256 87.04 5.888 128 17.28 97.28-66.218667 140.16-52.48 140.16-52.48 27.52 70.528 10.24 122.581333 5.12 135.509333 32.64 35.84 52.48 81.493333 52.48 137.386667 0 196.693333-119.68 240-233.6 252.586667 17.92 15.36 34.56 46.762667 34.56 94.72 0 68.522667-0.64 123.562667-0.64 140.202666 0 13.44 8.96 29.44 35.2 24.32C877.44 942.592 1024 750.592 1024 524.672c0-282.752-229.248-512-512-512"></path>
</svg>

    </a>
  
    <a href="https://weibo.com/wzlblair" rel="me noopener" class="iconfont"
      title="weibo"  target="_blank"
      >
      <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M385.714286 733.714286q12-19.428571 6.285714-39.428571t-25.714286-28.571429q-19.428571-8-41.714286-0.571429t-34.285714 26.285714q-12.571429 19.428571-7.428571 39.142857t24.571429 28.857143 42.571429 1.428571 35.714286-27.142857zm53.714286-69.142857q4.571429-7.428571 2-15.142857t-10-10.571429q-8-2.857143-16.285714 2.857143t-12.285714 10.571429q-9.714286 17.714286 7.428571 25.714286 8 2.857143 16.571429 2.857143t12.571429-10.571429zm99.428571 61.142857q-25.714286 58.285714-90.285714 85.714286t-128 6.857143q-61.142857-19.428571-84.285714-72.285714t3.714286-107.142857q26.857143-53.142857 86.571429-79.428571t120.285714-10.857143q63.428571 16.571429 90.571429 68.285714t1.428571 108.857143zm178.285714-91.428571q-5.142857-54.857143-50.857143-97.142857t-119.142857-62.285714-156.857143-12q-127.428571 13.142857-211.142857 80.857143t-75.714286 151.142857q5.142857 54.857143 50.857143 97.142857t119.142857 62.285714 156.857143 12q127.428571-13.142857 211.142857-80.857143t75.714286-151.142857zm176 2.285714q0 38.857143-21.142857 79.714286t-62.285714 78.285714-96.285714 67.142857-129.142857 47.428571-154.571429 17.714286-157.142857-19.142857-137.428571-53.142857-98-86.285714-37.142857-114q0-65.714286 39.714286-140t112.857143-147.428571q96.571429-96.571429 195.142857-134.857143t140.857143 4q37.142857 36.571429 11.428571 119.428571-2.285714 8-0.571429 11.428571t5.714286 4 8.285714 2.857143 7.714286-2l3.428571-1.142857q79.428571-33.714286 140.571429-33.714286t87.428571 34.857143q25.714286 36 0 101.714286-1.142857 7.428571-2.571429 11.428571t2.571429 7.142857 6.857143 4.285714 9.714286 3.428571q32.571429 10.285714 58.857143 26.857143t45.714286 46.571429 19.428571 66.571429zm-42.285714-356.571429q24 26.857143 31.142857 62t-3.714286 67.142857q-4.571429 13.142857-16.857143 19.428571t-25.428571 2.285714q-13.142857-4.571429-19.428571-16.857143t-2.285714-25.428571q11.428571-36-13.714286-63.428571t-61.142857-20q-13.714286 2.857143-25.714286-4.571429t-14.285714-21.142857q-2.857143-13.714286 4.571429-25.428571t21.142857-14.571429q34.285714-7.428571 68 3.142857t57.714286 37.428571zm103.428571-93.142857q49.714286 54.857143 64.285714 127.142857t-7.714286 138q-5.142857 15.428571-19.428571 22.857143t-29.714286 2.285714-22.857143-19.428571-2.857143-29.714286q16-46.857143 5.714286-98.285714t-45.714286-90.285714q-35.428571-39.428571-84.571429-54.571429t-98.857143-4.857143q-16 3.428571-29.714286-5.428571t-17.142857-24.857143 5.428571-29.428571 24.857143-16.857143q70.285714-14.857143 139.428571 6.571429t118.857143 76.857143z"></path>
</svg>

    </a>


<a href="https://mrbenwang.github.io/index.xml" rel="noopener alternate" type="application/rss&#43;xml"
    class="iconfont" title="rss" target="_blank">
    <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="30" height="30">
  <path d="M819.157333 1024C819.157333 574.592 449.408 204.8 0 204.8V0c561.706667 0 1024 462.293333 1024 1024h-204.842667zM140.416 743.04a140.8 140.8 0 0 1 140.501333 140.586667A140.928 140.928 0 0 1 140.074667 1024C62.72 1024 0 961.109333 0 883.626667s62.933333-140.544 140.416-140.586667zM678.784 1024h-199.04c0-263.210667-216.533333-479.786667-479.744-479.786667V345.173333c372.352 0 678.784 306.517333 678.784 678.826667z"></path>
</svg>

  </a>
  
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - <a class="theme-link" href="https://github.com/xianmin/hugo-theme-jane">Jane</a>
  </span>

  <span class="copyright-year">
    &copy;
    
      2015 -
    2019
    <span class="heart">
      
      <i class="iconfont">
        <svg class="icon" viewBox="0 0 1025 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="14" height="14">
  <path d="M1000.1 247.9c-15.5-37.3-37.6-70.6-65.7-98.9-54.4-54.8-125.8-85-201-85-85.7 0-166 39-221.4 107.4C456.6 103 376.3 64 290.6 64c-75.1 0-146.5 30.4-201.1 85.6-28.2 28.5-50.4 61.9-65.8 99.3-16 38.8-24 79.9-23.6 122.2 0.7 91.7 40.1 177.2 108.1 234.8 3.1 2.6 6 5.1 8.9 7.8 14.9 13.4 58 52.8 112.6 102.7 93.5 85.5 209.9 191.9 257.5 234.2 7 6.1 15.8 9.5 24.9 9.5 9.2 0 18.1-3.4 24.9-9.5 34.5-30.7 105.8-95.9 181.4-165 74.2-67.8 150.9-138 195.8-178.2 69.5-57.9 109.6-144.4 109.9-237.3 0.1-42.5-8-83.6-24-122.2z"
   fill="#8a8a8a"></path>
</svg>

      </i>
    </span><span class="author">
        Long
        
      </span></span>

  
  
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont">
        
        <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="35" height="35">
  <path d="M510.866688 227.694839 95.449397 629.218702l235.761562 0-2.057869 328.796468 362.40389 0L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777l894.052392 0 0 131.813095L63.840492 195.775872 63.840492 63.962777 63.840492 63.962777zM63.840492 63.962777"></path>
</svg>

      </i>
    </div>
  </div>
  
<script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>




<script type="text/javascript" src="/js/main.dee43230127a73d039a734510fa896c89c3c7ce0cf0be0c7a7433f8fd69b76dc.js" integrity="sha256-3uQyMBJ6c9A5pzRRD6iWyJw8fODPC&#43;DHp0M/j9abdtw="></script>






  
    <script type="text/javascript" src="/js/load-photoswipe.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe.min.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe-ui-default.min.js"></script>
  












  <script src="/js/custom.js"></script>


</body>
</html>
